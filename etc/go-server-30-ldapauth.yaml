
# Plugins to load, the order of these is important
plugins:
  - build/ldapauth.plugin
  - build/log.plugin

handlers:
  ldapauth:
    prefix: /api/ldap
    middleware:
      - ldapauth
      - log

ldapauth:
  url: ldaps://ldap.jumpcloud.com:636/
  user: ${LDAP_USER}
  password: ${LDAP_PASSWORD}
  basedn: ou=Users,o=${JUMPCLOUD_ORG_ID},dc=jumpcloud,dc=com
  # Filter for groups, users and search for a user by username or email address
  groupfilter: (objectClass=groupOfNames)
  userfilter: (objectClass=inetOrgPerson)
  searchfilter: "(&(objectClass=inetOrgPerson)(|(uid=\\${user})(mail=\\${email})))"
  expiry: 1h
  fields:
    - dn
    - uidNumber
    - gidNumber
    - givenName
    - sn
    - cn
    - uid
    - loginShell
    - sshKey
    - homeDirectory
    - mail
    - postalCode
    - street
    - homePhone
    - mobile
    - pager
    - telephoneNumber
    - facsimileTelephoneNumber
    - l
    - st
    - postOfficeBox
    - homePostalAddress
    - postalAddress
    - employeeNumber
    - memberOf
